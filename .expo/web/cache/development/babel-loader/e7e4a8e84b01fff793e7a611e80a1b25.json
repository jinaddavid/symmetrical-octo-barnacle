{"ast":null,"code":"var _jsxFileName = \"/Users/ash/Documents/DevSpace/MobileProject/ReactNative/InProgres/InterView/symmetrical-octo-barnacle/screens/CandidatesListsScreen.js\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport service from \"../model/DelayedCandidateService\";\nimport withFetching from \"../components/HOC/withFetching\";\nimport LoadingIndicator from \"../components/LoadingIndicator\";\nimport CandidateRowItem from \"../components/CandidateRowItem\";\n\nclass CandidatesListScreen extends React.PureComponent {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.onUpdated = _ref => {\n      var {\n        id,\n        name,\n        surname,\n        avatarUrl\n      } = _ref;\n      var {\n        candidates\n      } = this.state;\n      var index = candidates.findIndex(v => v.id === id);\n      this.setState({\n        candidates: [...candidates.slice(0, index), {\n          id,\n          name,\n          surname,\n          avatarUrl\n        }, ...candidates.slice(index + 1)]\n      });\n    };\n\n    var {\n      navigation,\n      payload\n    } = this.props;\n    navigation.setParams({\n      onSubmited: function () {\n        var _onSubmited = _asyncToGenerator(function* (candidate) {\n          var added = yield service.addCandidate(candidate);\n          var {\n            candidates\n          } = _this.state;\n\n          _this.setState({\n            candidates: [...candidates, added]\n          });\n\n          navigation.goBack();\n        });\n\n        function onSubmited(_x) {\n          return _onSubmited.apply(this, arguments);\n        }\n\n        return onSubmited;\n      }()\n    });\n    this.state = {\n      candidates: payload\n    };\n  }\n\n  render() {\n    var {\n      navigation\n    } = this.props;\n    var {\n      candidates\n    } = this.state;\n    return React.createElement(View, {\n      style: styles.container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    }, React.createElement(FlatList, {\n      data: candidates,\n      renderItem: _ref2 => {\n        var {\n          item\n        } = _ref2;\n        return React.createElement(TouchableWithoutFeedback, {\n          onPress: () => navigation.navigate('CandidateProfile', {\n            id: item.id,\n            onUpdated: this.onUpdated\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }\n        }, React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }\n        }, React.createElement(CandidateRowItem, _extends({}, item, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }\n        }))));\n      },\n      keyExtractor: _ref3 => {\n        var {\n          id\n        } = _ref3;\n        return id;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nvar fetcher = function () {\n  var _ref4 = _asyncToGenerator(function* () {\n    return service.fetchCandidates();\n  });\n\n  return function fetcher() {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexport default withFetching(CandidatesListScreen, LoadingIndicator, fetcher);\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  }\n});","map":{"version":3,"sources":["/Users/ash/Documents/DevSpace/MobileProject/ReactNative/InProgres/InterView/symmetrical-octo-barnacle/screens/CandidatesListsScreen.js"],"names":["React","service","withFetching","LoadingIndicator","CandidateRowItem","CandidatesListScreen","PureComponent","constructor","props","onUpdated","id","name","surname","avatarUrl","candidates","state","index","findIndex","v","setState","slice","navigation","payload","setParams","onSubmited","candidate","added","addCandidate","goBack","render","styles","container","item","navigate","fetcher","fetchCandidates","StyleSheet","create","flex","backgroundColor"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  View, FlatList, StyleSheet, TouchableWithoutFeedback\n} from 'react-native';\n\nimport service from '../model/DelayedCandidateService';\nimport withFetching from '../components/HOC/withFetching';\n\nimport LoadingIndicator from '../components/LoadingIndicator';\nimport CandidateRowItem from '../components/CandidateRowItem';\n\nclass CandidatesListScreen extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    const { navigation, payload } = this.props;\n\n    navigation.setParams({\n      onSubmited: async (candidate) => {\n        const added = await service.addCandidate(candidate);\n\n        const { candidates } = this.state;\n        this.setState({ candidates: [...candidates, added] });\n\n        navigation.goBack();\n      }\n    });\n\n    this.state = { candidates: payload };\n  }\n\n  onUpdated = ({\n    id, name, surname, avatarUrl\n  }) => {\n    const { candidates } = this.state;\n\n    const index = candidates.findIndex(v => v.id === id);\n\n    this.setState({\n      candidates: [\n        ...candidates.slice(0, index),\n        {\n          id,\n          name,\n          surname,\n          avatarUrl\n        },\n        ...candidates.slice(index + 1)\n      ]\n    });\n  };\n\n  render() {\n    const { navigation } = this.props;\n    const { candidates } = this.state;\n\n    return (\n      <View style={styles.container}>\n        <FlatList\n          data={candidates}\n          renderItem={({ item }) => (\n            <TouchableWithoutFeedback\n              onPress={() => navigation.navigate('CandidateProfile', { id: item.id, onUpdated: this.onUpdated })\n              }\n            >\n              <View>\n                <CandidateRowItem {...item} />\n              </View>\n            </TouchableWithoutFeedback>\n          )}\n          keyExtractor={({ id }) => id}\n        />\n      </View>\n    );\n  }\n}\n\nconst fetcher = async () => service.fetchCandidates();\n\nexport default withFetching(CandidatesListScreen, LoadingIndicator, fetcher);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  }\n});\n"]},"metadata":{},"sourceType":"module"}